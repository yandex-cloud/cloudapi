syntax = "proto3";

package yandex.cloud.datatransfer.v1.endpoint;

option go_package = "github.com/yandex-cloud/go-genproto/yandex/cloud/datatransfer/v1/endpoint;endpoint";
option java_package = "yandex.cloud.api.datatransfer.v1.endpoint";
option csharp_namespace = "Yandex.Cloud.Datatransfer.V1.EndPoint"; // there is a clash with class Endpoint in namespace Yandex.Cloud.Datatransfer.V1

enum YdbCleanupPolicy {
    YDB_CLEANUP_POLICY_UNSPECIFIED = 0;
    YDB_CLEANUP_POLICY_DISABLED = 1;
    YDB_CLEANUP_POLICY_DROP = 2;
}
enum YdbDefaultCompression {
    YDB_DEFAULT_COMPRESSION_UNSPECIFIED = 0;
    YDB_DEFAULT_COMPRESSION_DISABLED = 1;
    YDB_DEFAULT_COMPRESSION_LZ4 = 2;
}
// Settings specific to the YDB source endpoint
message YdbSource {
    reserved 3 to 4, 7 to 29, 31 to 32;
    // Database path in YDB where tables are stored. 
    // Example: `/ru/transfer_manager/prod/data-transfer-yt`
    string database = 1;
    // Instance of YDB. example: ydb-ru-prestable.yandex.net:2135.
    // If not specified, will be determined by database
    string instance = 2;
    // A list of paths which should be uploaded. When not specified, all available
    // tables are uploaded
    repeated string paths = 5;
    // Service account ID for interaction with database
    string service_account_id = 6;
    // Identifier of the Yandex Cloud VPC subnetwork to user for accessing the
    // database. If omitted, the server has to be accessible via Internet
    string subnet_id = 30;
    // Authorization Key
    string sa_key_content = 33;
    // List of security groups that the transfer associated with this endpoint should
    // use
    repeated string security_groups = 34;
    // Pre-created change feed if any
    string changefeed_custom_name = 35;
    // Consumer for pre-created change feed if any
    string changefeed_custom_consumer_name = 36;
}
// Settings specific to the YDB target endpoint
message YdbTarget {
    reserved 3 to 9, 12 to 20, 22 to 29, 31;
    // Database path in YDB where tables are stored. 
    // Example: `/ru/transfer_manager/prod/data-transfer`
    string database = 1;
    // Instance of YDB. example: ydb-ru-prestable.yandex.net:2135.
    // If not specified, will be determined by database
    string instance = 2;
    // Path extension for database, each table will be layouted into this path
    string path = 10;
    // Service account ID for interaction with database
    string service_account_id = 11;
    // Cleanup policy determine how to clean collections when activating the transfer. 
    // One of `YDB_CLEANUP_POLICY_DISABLED` or `YDB_CLEANUP_POLICY_DROP`
    YdbCleanupPolicy cleanup_policy = 21;
    // Identifier of the Yandex Cloud VPC subnetwork to user for accessing the
    // database. 
    // If omitted, the server has to be accessible via Internet
    string subnet_id = 30;
    // Authentication key
    string sa_key_content = 32;
    // List of security groups that the transfer associated with this endpoint should
    // use
    repeated string security_groups = 33;
    // Whether a column-oriented (i.e. OLAP) tables should be created. 
    // Default is `false` (create row-oriented OLTP tables)
    bool is_table_column_oriented = 34;
    // Compression that will be used for default columns family on YDB table creation.
    // One of `YDB_DEFAULT_COMPRESSION_UNSPECIFIED`,
    // `YDB_DEFAULT_COMPRESSION_DISABLED`, `YDB_DEFAULT_COMPRESSION_LZ4`
    YdbDefaultCompression default_compression = 35;
    // Whether can change table schema if schema changed on source
    bool is_schema_migration_disabled = 36;
}
