syntax = "proto3";

package yandex.cloud.connectionmanager.v1;

import "yandex/cloud/connectionmanager/v1/common.proto";

option go_package = "github.com/yandex-cloud/go-genproto/yandex/cloud/connectionmanager/v1;connectionmanager";
option java_package = "yandex.cloud.api.connectionmanager.v1";

message RedisAuth {
    message UserPasswordAuth {
        string user = 1;
        Password password = 2 ;
    }
    oneof security {
        UserPasswordAuth user_password = 1;
    }
}
message RedisCluster {
    reserved 1, 2, 5;
    message Host {
        enum Role {
            ROLE_UNSPECIFIED = 0;
            MASTER = 1;
            REPLICA = 2;
        }
        enum Health {
            HEALTH_UNSPECIFIED = 0;
            ALIVE = 1;
            DEAD = 2;
            DEGRADED = 3;
        }
        string host = 1;
        int64 port = 2;
        Role role = 3;
        Health health = 4;
        string shard_name = 5;
    }
    repeated Host hosts = 6;
    int64 sentinel_port = 3;
    TLSParams tls_params = 4;
}
message RedisConnection {
    reserved 2;
    RedisCluster cluster = 1;
    RedisAuth auth = 3;
    repeated int64 databases = 4;
}
