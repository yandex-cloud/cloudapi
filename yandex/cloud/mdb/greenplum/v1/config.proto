syntax = "proto3";

package yandex.cloud.mdb.greenplum.v1;

import "google/protobuf/wrappers.proto";

import "yandex/cloud/validation.proto";

option go_package = "github.com/yandex-cloud/go-genproto/yandex/cloud/mdb/greenplum/v1;greenplum";
option java_package = "yandex.cloud.api.mdb.greenplum.v1";

// A list of computational resources allocated to a host.

message Resources {

  // ID of the preset for computational resources allocated to a host.
  //
  // Available presets are listed in the [documentation](/docs/managed-greenplum/concepts/instance-types).
  string resource_preset_id = 1;

  // Volume of the storage used by the host, in bytes.
  int64 disk_size = 2;

  // Type of the storage used by the host: `network-hdd`, `network-ssd` or `local-ssd`.
  string disk_type_id = 3;
}

// Route server configuration.

message ConnectionPoolerConfig {

  // Route server pool mode.

  enum PoolMode {
    // PoolMode not explicitly set (uses defaults).
    POOL_MODE_UNSPECIFIED = 0;

    // Assign server connection to a client until it disconnects. Default value.
    SESSION = 1;

    // Assign server connection to a client for a transaction processing.
    TRANSACTION = 2;
  }

  // Route server pool mode.
  PoolMode mode = 1;

  // The number of servers in the server pool. Clients are placed in a wait queue when all servers are busy.
  //
  // Set to zero to disable the limit.
  google.protobuf.Int64Value size = 2;

  // Client pool idle timeout, in seconds.
  //
  // Drop stale client connection after this much seconds of idleness, which is not in transaction.
  //
  // Set to zero to disable.
  google.protobuf.Int64Value client_idle_timeout = 3;

  // Client pool idle in transaction timeout, in seconds.
  //
  // Drop client connection in transaction after this much seconds of idleness.
  //
  // Set to zero to disable.
  google.protobuf.Int64Value idle_in_transaction_timeout = 4;
}

// Start time for background activity
message BackgroundActivityStartAt {
    // hours
    int64 hours = 1 [(value) = "0-23"];
    // minutes
    int64 minutes = 2 [(value) = "0-59"];
}

// Enables scripts that collects tables sizes to `*_sizes` tables in `mdb_toolkit` schema.
message TableSizes {
    // Time when start "table_sizes" script
    repeated BackgroundActivityStartAt starts = 1 [(size) = "<=4"];
}

// Configuration for `ANALYZE` and `VACUUM` operations.
message AnalyzeAndVacuum {
    // Time when analyze will start
    BackgroundActivityStartAt start = 1;
    // Maximum duration of the `ANALYZE` operation, in seconds. The default value is `36000`. As soon as this period expires, the `ANALYZE` operation will be forced to terminate.
    google.protobuf.Int64Value analyze_timeout = 2[(value) = "7200-86399"];
    // Maximum duration of the `VACUUM` operation, in seconds. The default value is `36000`. As soon as this period expires, the `VACUUM` operation will be forced to terminate.
    google.protobuf.Int64Value vacuum_timeout = 3[(value) = "7200-86399"];
}

// Configuration for long running queries killer.
message BackgroundActivitiesConfig {
    // Enables scripts that collects tables sizes to `*_sizes` tables in `mdb_toolkit` schema.
    TableSizes table_sizes = 1;
    // Configuration for `ANALYZE` and `VACUUM` operations.
    AnalyzeAndVacuum analyze_and_vacuum = 2;
    // Configuration for long running queries killer.
    QueryKillerScripts query_killer_scripts = 3;
}

message QueryKiller {
  // Use query killer or not
  google.protobuf.BoolValue enable = 1;
  // Maximum duration for this type of queries (in seconds).
  google.protobuf.Int64Value max_age = 2[(value) = "1-86400"];
  // Ignore these users when considering queries to terminate
  repeated string ignore_users = 3;
}

message QueryKillerScripts {
  // Configuration of script that kills long running queries that are in `idle` state.
  QueryKiller idle = 1;
  // Configuration of script that kills long running queries that are in `idle in transaction` state.
  QueryKiller idle_in_transaction = 2;
  // Configuration of script that kills long running queries (in any state).
  QueryKiller long_running = 3;
}

// Configuration of the master subcluster.

message MasterSubclusterConfig {

  // Computational resources allocated to Greenplum® master subcluster hosts.
  Resources resources = 1;
}

// Configuration of the segment subcluster.

message SegmentSubclusterConfig {

  // Computational resources allocated to Greenplum® segment subcluster hosts.
  Resources resources = 1;
}

enum LogErrorVerbosity {
  LOG_ERROR_VERBOSITY_UNSPECIFIED = 0;

  TERSE = 1;

  DEFAULT = 2;

  VERBOSE = 3;
}

enum LogLevelMessage {
  LOG_LEVEL_MESSAGE_UNSPECIFIED = 0;

  DEBUG5 = 1;

  DEBUG4 = 2;

  DEBUG3 = 3;

  DEBUG2 = 4;

  DEBUG1 = 5;

  INFO = 6;

  NOTICE = 7;

  WARNING = 8;

  ERROR = 9;

  FATAL = 10;

  PANIC = 11;
}

enum LogStatement {
    // LogStatement not explicitly set (uses defaults).
    LOG_STATEMENT_UNSPECIFIED = 0;

    // None statements are logged.
    NONE = 1;

    // Logs all data definition commands like `CREATE`, `ALTER`, and `DROP`. Default value.
    DDL = 2;

    // Logs all `DDL` statements, plus `INSERT`, `UPDATE`, `DELETE`, `TRUNCATE`, and `COPY FROM`.
    MOD = 3;

    // Logs all statements.
    ALL = 4;
}

// Specifies the mode for triggering automatic statistics collection with ANALYZE.
// https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_autostats_mode
enum GPAutostatsMode {
  // GPAutostatsMode not explicitly set (uses defaults).
  GP_AUTOSTATS_MODE_UNSPECIFIED = 0;

  // Disable auto-ANALYZE completely. Stats will be updated only via manual ANALYZE calls.
  GP_AUTOSTATS_MODE_NONE = 1;

  // Run ANALYZE when data changes exceed threshold (e.g., after INSERT/UPDATE/DELETE).
  GP_AUTOSTATS_MODE_ON_CHANGE = 2;

  // Run ANALYZE only if no stats exist (e.g., new or cleared table).
  GP_AUTOSTATS_MODE_ON_NO_STATS = 3;
}

message GreenplumConfig6 {
  // Maximum number of inbound connections on master segment
  google.protobuf.Int64Value max_connections = 1 [(value) = "50-1000"];

  // Specify the maximum size of WAL files that replication slots are allowed to retain in the pg_wal directory at checkpoint time.
  // https://www.postgresql.org/docs/current/runtime-config-replication.html
  google.protobuf.Int64Value max_slot_wal_keep_size = 2 [(value) = "0-214748364800"];

  // Sets the maximum total disk size that all running queries are allowed to use for creating temporary spill files at each segment.
  // The default value is 0, which means a limit is not enforced.
  // https://docs.greenplum.org/6-5/ref_guide/config_params/guc-list.html#gp_workfile_limit_per_segment
  google.protobuf.Int64Value gp_workfile_limit_per_segment = 3 [(value) = ">=0"];

  // Sets the maximum disk size an individual query is allowed to use for creating temporary spill files at each segment.
  // The default value is 0, which means a limit is not enforced.
  // https://docs.greenplum.org/6-5/ref_guide/config_params/guc-list.html#gp_workfile_limit_per_query
  google.protobuf.Int64Value gp_workfile_limit_per_query = 4 [(value) = "0-1099511627776"];

  // Sets the maximum number of temporary spill files (also known as workfiles) allowed per query per segment.
  // Spill files are created when executing a query that requires more memory than it is allocated.
  // The current query is terminated when the limit is exceeded.
  // Set the value to 0 (zero) to allow an unlimited number of spill files. master session reload
  // https://docs.greenplum.org/6-5/ref_guide/config_params/guc-list.html#gp_workfile_limit_files_per_query
  // Default value is 10000
  google.protobuf.Int64Value gp_workfile_limit_files_per_query = 5 [(value) = "0-100000"];

  // Sets the maximum number of transactions that can be in the "prepared" state simultaneously
  // https://www.postgresql.org/docs/9.6/runtime-config-resource.html
  google.protobuf.Int64Value max_prepared_transactions = 6 [(value) = "50-10000"];

  // Specifies whether the temporary files created, when a hash aggregation or hash join operation spills to disk, are compressed.
  // https://docs.greenplum.org/6-5/ref_guide/config_params/guc-list.html#gp_workfile_compression
  google.protobuf.BoolValue gp_workfile_compression = 7;

  // Sets the maximum memory limit for a query. Helps avoid out-of-memory errors on a segment host during query processing as a result of setting statement_mem too high.
  // Taking into account the configuration of a single segment host, calculate max_statement_mem as follows:
  // (seghost_physical_memory) / (average_number_concurrent_queries)
  // When changing both max_statement_mem and statement_mem, max_statement_mem must be changed first, or listed first in the postgresql.conf file.
  // https://greenplum.docs.pivotal.io/6-19/ref_guide/config_params/guc-list.html#max_statement_mem
  // Default value is 2097152000 (2000MB)
  google.protobuf.Int64Value max_statement_mem = 8 [(value) = "134217728-1099511627776"]; // in bytes

  // Controls which SQL statements are logged. DDL logs all data definition commands like CREATE, ALTER, and DROP commands.
  // MOD logs all DDL statements, plus INSERT, UPDATE, DELETE, TRUNCATE, and COPY FROM.
  // PREPARE and EXPLAIN ANALYZE statements are also logged if their contained command is of an appropriate type.
  // https://docs.greenplum.org/6-5/ref_guide/config_params/guc-list.html#log_statement
  // Default value is ddl
  LogStatement log_statement = 9;

  // https://docs.vmware.com/en/VMware-Tanzu-Greenplum/6/greenplum-database/GUID-ref_guide-config_params-guc-list.html#gp_add_column_inherits_table_setting
  google.protobuf.BoolValue gp_add_column_inherits_table_setting = 10;

  // Controls whether the Greenplum Database Global Deadlock Detector is enabled to manage concurrent UPDATE and DELETE operations on heap tables to improve performance. See Inserting, Updating, and Deleting Datain the Greenplum Database Administrator Guide. The default is off, the Global Deadlock Detector is deactivated.
  // If the Global Deadlock Detector is deactivated (the default), Greenplum Database runs concurrent update and delete operations on a heap table serially.
  // If the Global Deadlock Detector is enabled, concurrent updates are permitted and the Global Deadlock Detector determines when a deadlock exists, and breaks the deadlock by cancelling one or more backend processes associated with the youngest transaction(s) involved.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_enable_global_deadlock_detector
  google.protobuf.BoolValue gp_enable_global_deadlock_detector = 11;

  // Specifies the executing interval (in seconds) of the global deadlock detector background worker process.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_global_deadlock_detector_period
  google.protobuf.Int64Value gp_global_deadlock_detector_period = 12;

  // Max amount of slice-processes for one query in one segment.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_max_slices
  google.protobuf.Int64Value gp_max_slices = 13 [(value) = "10-100"];

  // Define amount of working processes in segment, that keeping in warm cash after end of query for usage again in next queries.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_cached_segworkers_threshold
  google.protobuf.Int64Value gp_cached_segworkers_threshold = 14 [(value) = "0-10"];

  // Max time (in ms) which query will wait lock free on object
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#lock_timeout
  google.protobuf.Int64Value lock_timeout = 15 [(value) = "0-2147483647"];

  // Max time (in ms) which session can idle in open transaction
  // https://postgrespro.ru/docs/postgrespro/current/runtime-config-client#GUC-IDLE-IN-TRANSACTION-SESSION-TIMEOUT
  google.protobuf.Int64Value idle_in_transaction_session_timeout = 16 [(value) = "0-2147483647"];

  // Percent of utilized Greenplum Database vmem that triggers the termination of queries.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#runaway_detector_activation_percent
  google.protobuf.Int64Value runaway_detector_activation_percent = 17 [(value) = "0-100"];

  // Set memory limit (in MB) for working process. If a query executor process consumes more than this configured amount, then the process will not be cached for use in subsequent queries after the process completes.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_vmem_protect_segworker_cache_limit
  google.protobuf.Int64Value gp_vmem_protect_segworker_cache_limit = 18 [(value) = "0-4096"];

  // Forces ZSTD lib use Greenplum memory allocation system.
  google.protobuf.BoolValue gp_enable_zstd_memory_accounting = 19;

  // Specifies the total maximum uncompressed size of a query execution plan multiplied by the number of Motion operators (slices) in the plan.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_max_plan_size
  google.protobuf.Int64Value gp_max_plan_size = 20 [(value) = "0-2147483647"];

  // Specifies the mode for triggering automatic statistics collection after DML.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_autostats_mode
  GPAutostatsMode gp_autostats_mode = 21;

  // Specifies the threshold for automatic statistics collection when gp_autostats_mode is set to on_change.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_autostats_on_change_threshold
  google.protobuf.Int64Value gp_autostats_on_change_threshold = 22 [(value) = "0-2147483647"];

  // Identifies the maximum percentage of system memory resources to allocate to resource groups on each Greenplum Database segment node.
  // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_resource_group_memory_limit
  google.protobuf.DoubleValue gp_resource_group_memory_limit = 23 [(value) = "0.1-0.8"];

  // This outputs a line to the server log detailing each successful connection. Some client programs, like psql,
  // attempt to connect twice while determining if a password is required, so duplicate "connection received" messages
  // do not always indicate a problem.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_connections
  google.protobuf.BoolValue log_connections = 24;

  // This outputs a line in the server log at termination of a client session, and includes the duration of the session.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_disconnections
  google.protobuf.BoolValue log_disconnections = 25;

  // By default, connection log messages only show the IP address of the connecting host.
  // Turning on this option causes logging of the host name as well. Note that depending on your host name
  // resolution setup this might impose a non-negligible performance penalty.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_hostname
  google.protobuf.BoolValue log_hostname = 26;

  // For each query, write total performance statistics of the query parser, planner, and executor to the server log.
  // This is a crude profiling instrument.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_statement_stats
  google.protobuf.BoolValue log_statement_stats = 27;

  // Logs the statement and its duration on a single log line if its duration is greater than or equal
  // to the specified number of milliseconds. Setting this to 0 will print all statements and their durations.
  // -1 deactivates the feature. For example, if you set it to 250 then all SQL statements that run 250ms or longer will be logged.
  // Enabling this option can be useful in tracking down unoptimized queries in your applications.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_min_duration_statement
  google.protobuf.Int64Value log_min_duration_statement = 28 [(value) = "-1-2147483647"]; // in milliseconds.

  // Sets the amount of memory a Greenplum Database master instance uses for shared memory buffers.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#shared_buffers
  google.protobuf.Int64Value master_shared_buffers = 29 [(value) = "1048576-2147483647"];

  // The shared lock table is created with room to describe locks on max_locks_per_transaction * (max_connections + max_prepared_transactions) objects,
  // so no more than this many distinct objects can be locked at any one time.
  // This is not a hard limit on the number of locks taken by any one transaction, but rather a maximum average value.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#max_locks_per_transaction
  google.protobuf.Int64Value max_locks_per_transaction = 30 [(value) = "128-2048"];

  // Sets the amount of memory a Greenplum Database segment instance uses for shared memory buffers.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#shared_buffers
  google.protobuf.Int64Value segment_shared_buffers = 31 [(value) = "1048576-2147483647"];

  // Controls the amount of detail written in the server log for each message that is logged.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_error_verbosity
  LogErrorVerbosity log_error_verbosity = 32;

  // Controls which message levels are written to the server log.
  // Each level includes all the levels that follow it. The later the level, the fewer messages are sent to the log.
  // https://docs.vmware.com/en/VMware-Greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#log_min_messages
  LogLevelMessage log_min_messages = 33;
}

message GreenplumConfigCBDB {
    // The maximum number of concurrent connections to the database server.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#max_connections
    google.protobuf.Int64Value max_connections = 1 [(value) = "50-1000"];

    // Sets the maximum size in megabytes of Write-Ahead Logging (WAL) files on disk per segment instance that can be reserved
    // when Greenplum streams data to the mirror segment instance or standby coordinator to keep it synchronized
    // with the corresponding primary segment instance or coordinator.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#max_slot_wal_keep_size
    google.protobuf.Int64Value max_slot_wal_keep_size = 2 [(value) = "0-214748364800"];

    // Sets the maximum total disk size that all running queries are allowed to use for creating temporary spill files at each segment.
    // The default value is 0, which means a limit is not enforced.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#gp_workfile_limit_per_segment
    google.protobuf.Int64Value gp_workfile_limit_per_segment = 3 [(value) = ">=0"];

    // Sets the maximum disk size an individual query is allowed to use for creating temporary spill files at each segment.
    // The default value is 0, which means a limit is not enforced.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#gp_workfile_limit_per_query
    google.protobuf.Int64Value gp_workfile_limit_per_query = 4 [(value) = "0-1099511627776"];

    // Sets the maximum number of temporary spill files (also known as workfiles) allowed per query per segment.
    // Spill files are created when executing a query that requires more memory than it is allocated.
    // The current query is terminated when the limit is exceeded.
    // Set the value to 0 (zero) to allow an unlimited number of spill files. master session reload
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#gp_workfile_limit_files_per_query
    // Default value is 10000
    google.protobuf.Int64Value gp_workfile_limit_files_per_query = 5 [(value) = "0-100000"];

    // Sets the maximum number of transactions that can be in the "prepared" state simultaneously
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#max_prepared_transactions
    google.protobuf.Int64Value max_prepared_transactions = 6 [(value) = "50-10000"];

    // Specifies whether the temporary files created, when a hash aggregation or hash join operation spills to disk, are compressed.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#gp_workfile_compression
    google.protobuf.BoolValue gp_workfile_compression = 7;

    // Sets the maximum memory limit for a query. Helps avoid out-of-memory errors on a segment host during query processing as a result of setting statement_mem too high.
    // Taking into account the configuration of a single segment host, calculate max_statement_mem as follows:
    // (seghost_physical_memory) / (average_number_concurrent_queries)
    // When changing both max_statement_mem and statement_mem, max_statement_mem must be changed first, or listed first in the postgresql.conf file.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#max_statement_mem
    // Default value is 2097152000 (2000MB)
    google.protobuf.Int64Value max_statement_mem = 8 [(value) = "134217728-1099511627776"]; // in bytes

    // Controls which SQL statements are logged. DDL logs all data definition commands like CREATE, ALTER, and DROP commands.
    // MOD logs all DDL statements, plus INSERT, UPDATE, DELETE, TRUNCATE, and COPY FROM.
    // PREPARE and EXPLAIN ANALYZE statements are also logged if their contained command is of an appropriate type.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_statement
    // Default value is ddl
    LogStatement log_statement = 9;

    // Controls whether the Greenplum Database Global Deadlock Detector is enabled to manage concurrent UPDATE and DELETE operations on heap tables to improve performance. See Inserting, Updating, and Deleting Datain the Greenplum Database Administrator Guide. The default is off, the Global Deadlock Detector is deactivated.
    // If the Global Deadlock Detector is deactivated (the default), Greenplum Database runs concurrent update and delete operations on a heap table serially.
    // If the Global Deadlock Detector is enabled, concurrent updates are permitted and the Global Deadlock Detector determines when a deadlock exists, and breaks the deadlock by cancelling one or more backend processes associated with the youngest transaction(s) involved.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#gp_enable_global_deadlock_detector
    google.protobuf.BoolValue gp_enable_global_deadlock_detector = 10;

    // Specifies the executing interval (in seconds) of the global deadlock detector background worker process.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_global_deadlock_detector_period
    google.protobuf.Int64Value gp_global_deadlock_detector_period = 11;

    // Max amount of slice-processes for one query in one segment.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_max_slices
    google.protobuf.Int64Value gp_max_slices = 12 [(value) = "10-100"];

    // Define amount of working processes in segment, that keeping in warm cash after end of query for usage again in next queries.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_cached_segworkers_threshold
    google.protobuf.Int64Value gp_cached_segworkers_threshold = 13 [(value) = "0-10"];

    // Max time (in ms) which query will wait lock free on object
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#lock_timeout
    google.protobuf.Int64Value lock_timeout = 14 [(value) = "0-2147483647"];

    // Max time (in ms) which session can idle in open transaction
    // https://postgrespro.ru/docs/postgrespro/current/runtime-config-client#GUC-IDLE-IN-TRANSACTION-SESSION-TIMEOUT
    google.protobuf.Int64Value idle_in_transaction_session_timeout = 15 [(value) = "0-2147483647"];

    // Percent of utilized Greenplum Database vmem that triggers the termination of queries.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#runaway_detector_activation_percent
    google.protobuf.Int64Value runaway_detector_activation_percent = 16 [(value) = "0-100"];

    // Set memory limit (in MB) for working process. If a query executor process consumes more than this configured amount, then the process will not be cached for use in subsequent queries after the process completes.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_vmem_protect_segworker_cache_limit
    google.protobuf.Int64Value gp_vmem_protect_segworker_cache_limit = 17 [(value) = "0-4096"];

    // Forces ZSTD lib use Greenplum memory allocation system.
    google.protobuf.BoolValue gp_enable_zstd_memory_accounting = 18;

    // Specifies the total maximum uncompressed size of a query execution plan multiplied by the number of Motion operators (slices) in the plan.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_max_plan_size
    google.protobuf.Int64Value gp_max_plan_size = 19 [(value) = "0-2147483647"];

    // Specifies the mode for triggering automatic statistics collection after DML.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_autostats_mode
    GPAutostatsMode gp_autostats_mode = 20;

    // Specifies the threshold for automatic statistics collection when gp_autostats_mode is set to on_change.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_autostats_on_change_threshold
    google.protobuf.Int64Value gp_autostats_on_change_threshold = 21 [(value) = "0-2147483647"];

    // Identifies the maximum percentage of system memory resources to allocate to resource groups on each Greenplum Database segment node.
    // https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum/6/greenplum-database/ref_guide-config_params-guc-list.html#gp_resource_group_memory_limit
    google.protobuf.DoubleValue gp_resource_group_memory_limit = 22 [(value) = "0.1-0.8"];

    // This outputs a line to the server log detailing each successful connection. Some client programs, like psql,
    // attempt to connect twice while determining if a password is required, so duplicate "connection received" messages
    // do not always indicate a problem.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_connections
    google.protobuf.BoolValue log_connections = 23;

    // This outputs a line in the server log at termination of a client session, and includes the duration of the session.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_disconnections
    google.protobuf.BoolValue log_disconnections = 24;

    // By default, connection log messages only show the IP address of the connecting host.
    // Turning on this option causes logging of the host name as well. Note that depending on your host name
    // resolution setup this might impose a non-negligible performance penalty.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_hostname
    google.protobuf.BoolValue log_hostname = 25;

    // For each query, write total performance statistics of the query parser, planner, and executor to the server log.
    // This is a crude profiling instrument.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_statement_stats
    google.protobuf.BoolValue log_statement_stats = 26;

    // Logs the statement and its duration on a single log line if its duration is greater than or equal
    // to the specified number of milliseconds. Setting this to 0 will print all statements and their durations.
    // -1 deactivates the feature. For example, if you set it to 250 then all SQL statements that run 250ms or longer will be logged.
    // Enabling this option can be useful in tracking down unoptimized queries in your applications.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_min_duration_statement
    google.protobuf.Int64Value log_min_duration_statement = 27 [(value) = "-1-2147483647"]; // in milliseconds.

    // Sets the amount of memory a Greenplum Database master instance uses for shared memory buffers.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#shared_buffers
    google.protobuf.Int64Value master_shared_buffers = 28 [(value) = "1048576-2147483647"];

    // The shared lock table is created with room to describe locks on max_locks_per_transaction * (max_connections + max_prepared_transactions) objects,
    // so no more than this many distinct objects can be locked at any one time.
    // This is not a hard limit on the number of locks taken by any one transaction, but rather a maximum average value.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#max_locks_per_transaction
    google.protobuf.Int64Value max_locks_per_transaction = 29 [(value) = "128-2048"];

    // Sets the amount of memory a Greenplum Database segment instance uses for shared memory buffers.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#shared_buffers
    google.protobuf.Int64Value segment_shared_buffers = 30 [(value) = "1048576-2147483647"];

    // Controls the amount of detail written in the server log for each message that is logged.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_error_verbosity
    LogErrorVerbosity log_error_verbosity = 31;

    // Controls which message levels are written to the server log.
    // Each level includes all the levels that follow it. The later the level, the fewer messages are sent to the log.
    // https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-config_params-guc-list.html#log_min_messages
    LogLevelMessage log_min_messages = 32;
}

message GreenplumConfigSet6 {
  // Effective settings for a Greenplum (a combination of settings defined
  // in [user_config] and [default_config]).
  GreenplumConfig6 effective_config = 1 [(required) = true];

  // User-defined settings for a Greenplum.
  GreenplumConfig6 user_config = 2;

  // Default configuration for a Greenplum.
  GreenplumConfig6 default_config = 3;
}

message ConnectionPoolerConfigSet {
  // Effective settings for an Odyssey® pooler (a combination of settings defined in [ConnectionPoolerConfigSet.user_config] and [ConnectionPoolerConfigSet.default_config]).
  ConnectionPoolerConfig effective_config = 1 [(required) = true];

  // User-defined settings for an Odyssey® pooler.
  ConnectionPoolerConfig user_config = 2;

  // Default configuration for an Odyssey® pooler.
  ConnectionPoolerConfig default_config = 3;
}

message GreenplumConfigSetCBDB {
    // Effective settings for a Cloudberry (a combination of settings defined
    // in [user_config] and [default_config]).
    GreenplumConfigCBDB effective_config = 1 [(required) = true];

    // User-defined settings for a Cloudberry.
    GreenplumConfigCBDB user_config = 2;

    // Default configuration for a Cloudberry.
    GreenplumConfigCBDB default_config = 3;
}
